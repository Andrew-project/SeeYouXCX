<template>
<button wx:if="{{canUsePress}}" bind:longpress="longClickVoiceBtn" catch:touchmove="sendVoiceMoveEvent"
            catch:touchend="sendVoiceMoveEndEvent" id="send$voice$btn" hover-class="btn-voice-press" style="width: {{inputType == 'text' ? '552rpx' : '594rpx'}}">{{voiceObj.startStatus?'松开 结束':'按住 说话'}}
    </button>
<button wx:else bind:longtap="longClickVoiceBtn" catch:touchmove="sendVoiceMoveEvent"
            catch:touchend="sendVoiceMoveEndEvent" id="send$voice$btn" hover-class="btn-voice-press">{{voiceObj.startStatus?'松开 结束':'按住 说话'}}
    </button>
<view wx:if="{{voiceObj.showCancelSendVoicePart}}" style="width: {{voiceObj.voicePartWidth}}px;height: {{voiceObj.voicePartWidth}}px;display: flex;position: fixed;left: {{voiceObj.voicePartPositionToLeft}}px;bottom: {{voiceObj.voicePartPositionToBottom}}px;justify-content:center;align-items: center;border-radius: 20rpx;">
    <view style="background-color:black;opacity:{{voiceObj.status==='timeDown'?0.6:0}};width: 100%;height: 100%;border-radius: 20rpx;position: absolute"></view>
    <image src="../../static/images/chat/voice/{{voiceObj.status==='start'?(voiceObj.moveToCancel?'recall':'speak'):'attention'}}.png" style="width: 100%;height: 100%;border-radius: 20rpx" wx:if="{{voiceObj.status!=='timeDown'}}" />
    <text style="margin-bottom:30rpx;font-size: 150rpx;text-align: center;color: white;position: relative" wx:if="{{voiceObj.status==='timeDown'}}">{{voiceObj.timeDownNum}}</text>
    <view class="voice-record-git-status-style" wx:if="{{!voiceObj.moveToCancel&&voiceObj.status!=='short'}}">
        <image src="data:image/gif;base64,R0lGODlhOgAKAKIFAERERIWFhWVlZdbW1qampv///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFFAAFACwAAAAAOgAKAAADazi6XEUwSheqvU7ozR34YMiMgyOdBHWtGed6YUw2Dxqpq9W6GxyDs4XJBsHlAjuewPcDBBVDojGX5DF/z1JNWjjqCspeoQl8Rm1TFji8HJOd5i2660Wuw1dZnFike6svbmRZZyhpGHdKeSEJACH5BAUUAAUALAAAAAA6AAoAAANrCLpcNTBKR6q9LujNnfhgyIyAI50Dda0Z53phTDYPGqmr1bobHIOzhckGweUIO17A9xMEFUOiMZfkMX/PUk1aOOoKyl6hCXxGbVMWOLwck53mLbrrRa7DV1mcWKR7qy9uZFlnKGkYd0p5IQkAIfkEBRQABQAsAAAAADoACgAAA2soulwFMEo3qr2O6M1d+GDIjIIjnQB1rRnnemFMNg8aqavVuhscg7OFyQbB5QY7HsH3CwQVQ6Ixl+Qxf89STVo46grKXqEJfEZtUxY4vByTneYtuutFrsNXWZxYpHurL25kWWcoaRh3SnkhCQAh+QQFFAAFACwAAAAAOgAKAAADaxi6XCUwSgeqvW7ozR35YMiMgSOdAnWtGed6YUw2Dxqpq9W6GxyDs4XJBsHlADvewPcjBBVDojGX5DF/z1JNWjjqCspeoQl8Rm1TFji8HJOd5i2660Wuw1dZnFike6svbmRZZyhpGHdKeSEJACH5BAUUAAUALAAAAAA6AAoAAANrSLpcFTBKJ6q9DujN3fhgyIyEI50Bda0Z53phTDYPGqmr1bobHIOzhckGweUEOx7A9xsEFUOiMZfkMX/PUk1aOOoKyl6hCXxGbVMWOLwck53mLbrrRa7DV1mcWKR7qy9uZFlnKGkYd0p5IQkAOw==" class="voice-record-git-size-style" />
    </view>
    <text class="voice-status-style" style="background-color: {{voiceObj.moveToCancel?'#ab1900':'transparent'}};">{{voiceObj.status==='start'||voiceObj.status==='timeDown'?(voiceObj.moveToCancel?'松开手指，取消发送':'手指上滑，取消发送'):(voiceObj.status==='short'?'说话时间太短':'说话时间超时')}}</text>
</view>
</template>

<script>
export default {
  properties: {
    voiceObj: {
      type: Object
    },
    canUsePress: {
      type: Boolean
    },
    inputType: {
      type: String
    }
  },
  methods: {
    longClickVoiceBtn: function(e) {
      this.triggerEvent("longClickVoiceBtn", e);
    },
    sendVoiceMoveEvent: function(e) {
      this.triggerEvent("sendVoiceMoveEvent", e);
    },
    sendVoiceMoveEndEvent: function(e) {
      this.triggerEvent("sendVoiceMoveEndEvent", e);
    }
  }
};
</script>

<style lang="less" scoped>
.btn-voice-press {
  background-color: gainsboro;
}

button {
  font-size: 32rpx;
  width: 552rpx;
  height: 74rpx;
  line-height: 74rpx;
  margin-top: 15rpx;
  margin-bottom: 15rpx;
}

.voice-status-style {
  position: absolute;
  left: 0;
  bottom: 22rpx;
  width: 80%;
  text-align: center;
  font-size: 24rpx;
  color: white;
  padding-top: 5rpx;
  padding-bottom: 5rpx;
  margin-left: 10%;
  border-radius: 10rpx;
}

.voice-record-git-status-style {
  position: absolute;
  left: 0;
  bottom: 75rpx;
  width: 100%;
  display: flex;
  justify-content: center;
}

.voice-record-git-size-style {
  width: 58rpx;
  height: 10rpx;
}
</style>
